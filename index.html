<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Streamer.bot Commands</title>
<link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container">
    <h1>Enabled Streamer.bot Commands</h1>
    <table>
      <thead>
        <tr>
          <th>Command</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody id="commandList">
        <!-- Commands will populate here -->
      </tbody>
    </table>
    <p id="errorMessage" class="error"></p>
  </div>

  <script>
    async function loadCommands() {
      const errorEl = document.getElementById('errorMessage');
      try {
        const res = await fetch('commands.json'); // relative path
        if (!res.ok) throw new Error("Failed to fetch JSON");
        const data = await res.json();
        const tbody = document.getElementById('commandList');
        tbody.innerHTML = '';
        data.forEach(c => {
          const row = document.createElement('tr');
          row.innerHTML = `<td>${c.Name}</td><td>${c.Description || ''}</td>`;
          tbody.appendChild(row);
        });
        errorEl.textContent = '';
      } catch(err) {
        console.error("Failed to load commands:", err);
        errorEl.textContent = 'Unable to load commands. Please try again later.';
      }
    }

    loadCommands();
    setInterval(loadCommands, 60000); // refresh every 60 seconds
  </script>
</body>
</html>
